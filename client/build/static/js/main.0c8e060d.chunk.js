(this["webpackJsonpweb-client"]=this["webpackJsonpweb-client"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},37:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),c=a.n(l),s=(a(37),a(6)),i=a(7),o=a(9),m=a(10),u=a(11),h=a(12),p=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},d=function(e){var t=e.showRed;return r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"box-sm ".concat(t?"red-bg":"b1")}),r.a.createElement("div",{className:"box-sm ".concat(t?"pink-bg":"b2")}),r.a.createElement("div",{className:"box-sm ".concat(t?"purple-bg":"b3")}))},v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).isKeywordInText=function(e,t){var a=-1,n=[];for(t=t.toLowerCase();(a=e.indexOf(t,a+1))>=0;)n.push(a);return n},e.wordsCount=function(e){return e.trim().length>0?e.trim().split(" ").length:0},e.state={article:{},query:"",intervalId:0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.state,t=e.article,a=e.query;t&&Object.keys(t).length>0?this.setState({article:t,query:a}):this.props.history.push("/")}},{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"isSent",value:function(e,t,a,n){return e.filter((function(e){return e.sectionType==t&&e.paraIndex==a&&-1!=n.indexOf(e.sentence)}))}},{key:"getAllOccurrences",value:function(e,t){for(var a=[],n=-1;(n=e.indexOf(t,n+1))>=0;)a.push(n);return a}},{key:"render",value:function(){var e=this,t=this.state,a=t.article,n=t.query,l="";return r.a.createElement("div",{className:"container m-50 mb-75"},r.a.createElement("div",{className:"back-btn"},r.a.createElement(s.b,{to:"/".concat(n),className:"btn-floating btn-large waves-effect waves-light b-btn"},r.a.createElement("i",{className:"material-icons"},"keyboard_backspace"))),Object.keys(a).length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"title"},a.title),r.a.createElement("div",{className:"col s12 center m-25 offset-m2 l6 offset-l3"},r.a.createElement("div",{className:"card-panel grey lighten-5 z-depth-1"},r.a.createElement("span",{className:"black-text"},a.authors.length?r.a.createElement("i",null," Authors: "," "," ",a.authors.join(", ")," "):null))),r.a.createElement(d,{showRed:!0}),a.summary.length?r.a.createElement("div",{className:"m-50"},r.a.createElement("h4",null,"Summary"),r.a.createElement("p",null,a.summary)):null,a.abstract.length&&a.abstract[0].text&&this.wordsCount(a.abstract[0].text)>10?r.a.createElement("div",{className:"abstract m-50"},r.a.createElement("h4",null,"Abstract"),a.abstract.map((function(e,t){return r.a.createElement("p",null,e.text)}))):null,r.a.createElement("article",{className:"m-50"},a.body.map((function(t,a){var n=t.section,c=t.text,s=[];return(n.trim().length>5&&0===a||l!=n)&&(l=n,s.push(r.a.createElement("h5",{className:"section"},n))),e.wordsCount(c)>10&&s.push(r.a.createElement("p",null,c)),s})))):r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"})),r.a.createElement("div",{className:"m-50 center"},r.a.createElement("button",{title:"Back to top",className:"btn-floating btn-large waves-effect waves-light b-btn",onClick:function(){e.scrollToTop()}},r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_up"))))}}]),a}(n.Component),f=a(30),g=a.n(f),E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getSnippet=function(t){var a="";return a=t.summary.length?t.summary:t.abstract.length>0?t.abstract[0].text:t.body[0].text,a=e.splitByWords(a,30)},e.splitByWords=function(e,t){var a=e.split(" ");if(a.length>t){var n=e.indexOf(a.slice(t).join(" "))-1;e=e.substring(0,n)+"..."}return e},e.splitBySentence=function(e){var t=e.split(". ");if(t.length>2){var a=e.indexOf(t[t.length-1])-1;e=e.substring(0,a),e+=".."}return e},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.query,n=t.articles;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},n.map((function(t,n){return r.a.createElement("div",{className:"row article-item ".concat(n%2==0?"light-bg":"")},r.a.createElement("div",{className:"col s11",key:t.paper_id},r.a.createElement(s.b,{to:{pathname:"/article/".concat(t.paper_id),state:{article:t,query:a}}},r.a.createElement("h5",{className:"article-title"}," ",e.splitByWords(t.title,20)," ")),r.a.createElement("p",{className:"article-text"}," ",e.getSnippet(t)," ")),r.a.createElement("div",{className:"col s1 m-10"},r.a.createElement(s.b,{to:{pathname:"/article/".concat(t.paper_id),state:{article:t,query:a}}}," ",r.a.createElement("i",{className:"small material-icons open_icon"},"open_in_new"))))}))))}}]),a}(n.Component),b=function(){return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"}))},N=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s5"}),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"preloader-wrapper big active center"},r.a.createElement("div",{className:"spinner-layer spinner-blue"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))),r.a.createElement("div",{className:"col s4"}))},y=function(e){return"string"===typeof e&&e.length>0?e.substring(0,1).toUpperCase()+e.substring(1):e},w=a(31),k=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onSearch=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.query,r="";if(a?r=t.toLowerCase():(t.preventDefault(),r=t.target.value.toLowerCase()),n==(r=y(r.replace(/\s\s+/g," ").replace(".",""))))return!1;e.setState({query:r,loading:!0},r.length<3||p(r)?null:function(){return e.getAPI(r)})},e.getAPI=function(t){var a="";"localhost"==window.location.hostname&&(a="http://localhost:5000"),g.a.get("".concat(a,"/search?query=").concat(t)).then((function(t){if(200==t.status){var a=5,n=t.data;n.length<5&&(a=n.length),e.setState({articles:n,resultsLength:a,loading:!1})}})).catch((function(t){console.log(t),e.setState({error:"Server is down."})}))},e.state={query:"",articles:[],error:null,resultsLength:5,loading:!0,intervalId:0,title:"Coronavirus Research Engine",searchable:["Health","Treatment","Cure","Illness","Disease","SARS","Drug discovery","Italy","China","Cough","Incubation"]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.keyword;t&&this.setState({query:t},(function(){return e.getAPI(t)}))}},{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.query,l=t.error,c=t.articles,s=t.searchable,i=t.resultsLength,o=t.title;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col m12"},r.a.createElement("h1",{className:"title center"},o)),r.a.createElement("div",{className:"col m2"},r.a.createElement("div",{className:"collection"},s.map((function(t){return r.a.createElement("a",{href:"#",onClick:function(){return e.onSearch(t,"searchable")},className:"collection-item b-color ".concat(t.toLowerCase()==n.toLowerCase()?"active":"")},t)})))),r.a.createElement("div",{className:"col m10 m-5"},r.a.createElement("div",{className:"col s12"},r.a.createElement("nav",{className:"b-btn"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input-search",id:"search",value:n,onChange:this.onSearch,type:"search",required:!0}),r.a.createElement("label",{className:"label-icon",for:"search"},r.a.createElement("i",{className:"material-icons"},"search")),r.a.createElement("i",{className:"material-icons"},"close")))))),r.a.createElement("div",{className:"col s12"},a&&!p(n)?r.a.createElement(b,null):c.length>0?r.a.createElement("div",{className:"m-35"},r.a.createElement("h5",{className:"res-heading"},"Articles found relating to ",n),r.a.createElement(d,null),c.length>0?r.a.createElement(w.a,{dataLength:i,hasMore:i<c.length,next:function(){return e.setState({resultsLength:i+5})},loader:r.a.createElement(N,null),endMessage:r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{title:"Back to top",className:"btn-floating btn-large waves-effect waves-light b-btn",onClick:function(){e.scrollToTop()}},r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_up")))},r.a.createElement(E,Object.assign({},this.state,{articles:c.slice(0,i)}))):null):p(l)?n?r.a.createElement("p",null,' No articles found for "',n,'"'):r.a.createElement("p",{className:"info m-10 font-small"},"Search using a keyword, the engine will return the most relevant results among 30k scholar articles."):r.a.createElement("p",null,l)))))}}]),a}(n.Component);a(60);var S=function(){return r.a.createElement(s.a,null,r.a.createElement(i.a,{exact:!0,path:"/",component:k}),r.a.createElement(i.a,{exact:!0,path:"/:keyword",component:k}),r.a.createElement(i.a,{exact:!0,path:"/article/:id",component:v}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.0c8e060d.chunk.js.map