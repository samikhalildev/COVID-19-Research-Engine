(this["webpackJsonpweb-client"]=this["webpackJsonpweb-client"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},37:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),l=a.n(r),s=(a(37),a(6)),o=a(7),i=a(31),m=a(9),u=a(10),h=a(11),p=a(12),d=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},v=a(28),f=a.n(v),b=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).getSnippet=function(t){var a="";return t.abstract.length>0?(a=t.abstract[0].text,console.log(1)):(a=t.body[0].text,console.log(2)),a=e.splitByWords(a),console.log(a),a},e.splitByWords=function(e){var t=e.split(" ");if(t.length>20){var a=e.indexOf(t.slice(20).join(" "))-1;e=e.substring(0,a)+"..."}return e},e.splitBySentence=function(e){var t=e.split(". ");if(t.length>2){var a=e.indexOf(t[t.length-1])-1;e=e.substring(0,a),e+=".."}return e},e.state={},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.query,n=t.articles;return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},n.map((function(t,n){return c.a.createElement("div",{className:"row article-item ".concat(n%2==0?"light-bg":"")},c.a.createElement("div",{className:"col s11",key:t.paper_id},c.a.createElement("h5",{className:"article-title"}," ",t.title," "),c.a.createElement("p",{className:"article-text"}," ",e.getSnippet(t)," ")),c.a.createElement("div",{className:"col s1 m-10"},c.a.createElement(s.b,{to:{pathname:"/article/".concat(t.paper_id),state:{article:t,query:a}}}," ",c.a.createElement("i",{className:"small material-icons open_icon"},"open_in_new"))))}))))}}]),a}(n.Component),E=function(){return c.a.createElement("div",{className:"progress"},c.a.createElement("div",{className:"indeterminate"}))},g=function(e){var t=e.showRed;return c.a.createElement("div",{className:"box"},c.a.createElement("div",{className:"box-sm ".concat(t?"red-bg":"b1")}),c.a.createElement("div",{className:"box-sm ".concat(t?"pink-bg":"b2")}),c.a.createElement("div",{className:"box-sm ".concat(t?"purple-bg":"b3")}))},N=function(e){return"string"===typeof e&&e.length>0?e.substring(0,1).toUpperCase()+e.substring(1):e},y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).onSearch=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.query,c="";if(a?c=t.toLowerCase():(t.preventDefault(),c=t.target.value.toLowerCase()),n==(c=N(c.replace(/\s\s+/g," ").replace(".",""))))return!1;e.setState({query:c,loading:!0},c.length<3||d(c)?null:function(){return e.getAPI(c)})},e.getAPI=function(t){var a="";"localhost"==window.location.hostname&&(a="http://localhost:5000"),f.a.get("".concat(a,"/search?query=").concat(t)).then((function(t){200==t.status&&e.setState({articles:t.data,loading:!1})})).catch((function(e){return console.log(e)}))},e._updateArticles=function(t){var a={};console.log(t),Object.entries(t).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];console.log(n,c),a[n]={},c.forEach((function(e){var t=e.article.paper_id,c=!1;Object.keys(a[n]).forEach((function(e){e==t&&(c=e)})),c?a[n][t].push(e):a[n][t]=[e]}))})),console.log(a),e.setState({articles:a,loading:!1})},e.state={query:"",articles:[],loading:!1,title:"Coronavirus Research Engine",searchable:["Health","Treatment","Cure","Illness","Disease","SARS","Drug discovery","Italy","China","Cough","Incubation"]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.keyword;t&&this.setState({query:t},(function(){return e.getAPI(t)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.query,r=t.articles,l=t.searchable,s=t.title;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col m12"},c.a.createElement("h1",{className:"title center"},s)),c.a.createElement("div",{className:"col m2"},c.a.createElement("div",{className:"collection"},l.map((function(t){return c.a.createElement("a",{href:"#",onClick:function(){return e.onSearch(t,"searchable")},className:"collection-item b-color ".concat(t.toLowerCase()==n.toLowerCase()?"active":"")},t)})))),c.a.createElement("div",{className:"col m10 m-5"},c.a.createElement("div",{className:"col s12"},c.a.createElement("nav",{className:"b-btn"},c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{className:"input-search",id:"search",value:n,onChange:this.onSearch,type:"search",required:!0}),c.a.createElement("label",{className:"label-icon",for:"search"},c.a.createElement("i",{className:"material-icons"},"search")),c.a.createElement("i",{className:"material-icons"},"close")))))),c.a.createElement("div",{className:"col s12"},a&&!d(n)?c.a.createElement(E,null):r.length>0?c.a.createElement("div",{className:"m-35"},c.a.createElement("h5",{className:"res-heading"},"Articles found relating to ",n),c.a.createElement(g,null),r.length>0?c.a.createElement(b,this.state):null):n?c.a.createElement("p",null,' No articles found for "',n,'"'):c.a.createElement("p",{className:"info m-10 font-small"},"Search using a keyword, the engine will return the most relevant results among 30k scholar articles.")))))}}]),a}(n.Component),w=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={article:{},query:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t=this.props.location.state,a=t.article,n=t.query;e&&a&&Object.keys(a).length>0?this.setState({article:a,query:n}):this.props.history.push("/")}},{key:"isSent",value:function(e,t,a,n){return e.filter((function(e){return e.sectionType==t&&e.paraIndex==a&&-1!=n.indexOf(e.sentence)}))}},{key:"render",value:function(){var e=this.state,t=e.article,a=e.query,n="";return c.a.createElement("div",{className:"container m-50 mb-75"},c.a.createElement("div",{className:"back-btn"},c.a.createElement(s.b,{to:"/".concat(a),className:"btn-floating btn-large waves-effect waves-light b-btn"},c.a.createElement("i",{className:"material-icons"},"keyboard_backspace"))),Object.keys(t).length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:"title"},t.title),c.a.createElement("div",{className:"col s12 center m-25 offset-m2 l6 offset-l3"},c.a.createElement("div",{className:"card-panel grey lighten-5 z-depth-1"},c.a.createElement("span",{className:"black-text"},t.authors.length?c.a.createElement("i",null," Authors: "," "," ",t.authors.join(", ")," "):null))),c.a.createElement(g,{showRed:!0}),c.a.createElement("div",{className:"abstract m-50"},c.a.createElement("h4",null,"Abstract"),t.abstract.map((function(e,t){return c.a.createElement("p",null,e.text)}))),c.a.createElement("article",{className:"m-50"},t.body.map((function(e,t){var a=[],r=e.section;return 0!==t&&n==r||(n=r,a.push(c.a.createElement("h5",{className:"section"},r))),a.push(c.a.createElement("p",null,e.text)),a})))):c.a.createElement("div",{className:"progress"},c.a.createElement("div",{className:"indeterminate"})),c.a.createElement("div",{className:"m-50 center"},c.a.createElement(s.b,{to:"/".concat(a),className:"btn-floating btn-large waves-effect waves-light b-btn"},c.a.createElement("i",{className:"material-icons"},"keyboard_backspace"))))}}]),a}(n.Component);a(60);var k=function(){return c.a.createElement(s.a,null,c.a.createElement(o.a,{exact:!0,path:"/",component:y}),c.a.createElement(o.a,{exact:!0,path:"/:keyword",component:y}),c.a.createElement(o.a,{exact:!0,path:"/article/:id",component:w}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.2dcdc8e0.chunk.js.map